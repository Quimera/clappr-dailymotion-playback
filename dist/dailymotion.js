!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Clappr")):"function"==typeof define&&define.amd?define(["Clappr"],t):"object"==typeof exports?exports.DailymotionPlayback=t(require("Clappr")):e.DailymotionPlayback=t(e.Clappr)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;s=l=u=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;e=l,t=o,n=a,r=!0}},u=n(7),l=n(4),c=r(l),p=n(2),f=r(p);n(6);var d=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.options=e,this.settings={seekEnabled:!0,left:["playpause","position","duration"],"default":["seekbar"],right:["fullscreen","volume","hd-indicator"]},u.Mediator.on(u.Events.PLAYER_RESIZE,this.updateSize,this),this.render()}return o(t,e),a(t,[{key:"name",get:function(){return"dailymotion"}},{key:"template",get:function(){return f["default"](c["default"])}},{key:"attributes",get:function(){return{"data-dailymotion-playback":"","class":"clappr-dailymotion-playback",id:this.cid}}}]),a(t,[{key:"setupDailymotionPlayer",value:function(){window.DM&&window.DM.Player?this.embedDailymotionPlayer():this.embedDailymotionApiScript()}},{key:"embedDailymotionApiScript",value:function(){var e=this,t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src","http://api.dmcdn.net/all.js");var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.dmAsyncInit=function(){return e.embedDailymotionPlayer()}}},{key:"updateTest",value:function(e){console.log(e,"funciona")}},{key:"embedDailymotionPlayer",value:function(){var e=this,t={api:"postMessage",chromeless:1,wmode:"opaque",logo:0,info:0};DM.init(),this.player=new DM.player("yt"+this.cid,{video:this.options.src,autoplay:1,params:t,events:{apiready:this.ready(),timeupdate:function(){return e.timeupdate()},ended:function(){return e.stateStop()},playing:function(){return e.statePlaying()}}})}},{key:"updateSize",value:function(){this.player&&this.player.setSize(this.$el.width(),this.$el.height())}},{key:"ready",value:function(e){this._ready=!0,this.trigger(u.Events.PLAYBACK_READY)}},{key:"qualityChange",value:function(e){this.trigger(u.Events.PLAYBACK_HIGHDEFINITIONUPDATE)}},{key:"statePlaying",value:function(){this.enableMediaControl(),this.trigger(u.Events.PLAYBACK_PLAY)}},{key:"stateStop",value:function(){this.trigger(u.Events.PLAYBACK_ENDED)}},{key:"play",value:function(){this._ready?(this.playing=!0,this.player.play(),this.trigger(u.Events.PLAYBACK_PLAY),this.trigger(u.Events.PLAYBACK_BUFFERFULL)):this.listenToOnce(this,u.Events.PLAYBACK_READY,this.play)}},{key:"pause",value:function(){this.playing=!1,this.player.pause(),this.trigger(u.Events.PLAYBACK_PAUSE)}},{key:"seek",value:function(e){this.player&&this.player.seek(e)}},{key:"volume",value:function(e){this.player&&this.player.setVolume(e/100)}},{key:"progress",value:function(){var e=this.player.bufferedTime;this.trigger(u.Events.PLAYBACK_PROGRESS,0,e,this.player.duration)}},{key:"timeupdate",value:function(){this.playing=!0;var e=this.player.bufferedTime;this.trigger(u.Events.PLAYBACK_PROGRESS,0,e,this.player.duration),this.trigger(u.Events.PLAYBACK_TIMEUPDATE,this.player.currentTime,this.player.duration)}},{key:"isPlaying",value:function(){return this.player&&this.playing}},{key:"isHighDefinitionInUse",value:function(){return this.player&&!!this.player.getPlaybackQuality().match(/^hd\d+/)}},{key:"getDuration",value:function(){var e=0;return this.player&&(e=this.player.duration),e}},{key:"disableMediaControl",value:function(){this.$el.css({"pointer-events":"auto"}),this.trigger(u.Events.PLAYBACK_MEDIACONTROL_DISABLE)}},{key:"enableMediaControl",value:function(){this.$el.css({"pointer-events":"none"}),this.trigger(u.Events.PLAYBACK_MEDIACONTROL_ENABLE)}},{key:"render",value:function(){var e={id:"yt"+this.cid};return this.$el.html(this.template(e)),this.setupDailymotionPlayer(),this}}]),t}(u.Playback);t["default"]=d,d.canPlay=function(e){return!0},e.exports=t["default"]},function(e,t){"use strict";e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){var r,i;!function(n){var o={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},a=/(.)^/,s={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},u=/\\|'|\r|\n|\t|\u2028|\u2029/g,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},c=new RegExp("[&<>\"']","g"),p=function(e){return null==e?"":(""+e).replace(c,function(e){return l[e]})},f=0,d=function(e,t){var n,r=new RegExp([(o.escape||a).source,(o.interpolate||a).source,(o.evaluate||a).source].join("|")+"|$","g"),i=0,l="__p+='";e.replace(r,function(t,n,r,o,a){return l+=e.slice(i,a).replace(u,function(e){return"\\"+s[e]}),n&&(l+="'+\n((__t=("+n+"))==null?'':escapeExpr(__t))+\n'"),r&&(l+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),o&&(l+="';\n"+o+"\n__p+='"),i=a+t.length,t}),l+="';\n",o.variable||(l="with(obj||{}){\n"+l+"}\n"),l="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+l+"return __p;\n//# sourceURL=/microtemplates/source["+f++ +"]";try{n=new Function(o.variable||"obj","escapeExpr",l)}catch(c){throw c.source=l,c}if(t)return n(t,p);var d=function(e){return n.call(this,e,p)};return d.source="function("+(o.variable||"obj")+"){\n"+l+"}",d};d.settings=o,r=[],i=function(){return d}.apply(t,r),!(void 0!==i&&(e.exports=i))}(void 0)},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".clappr-dailymotion-playback[data-dailymotion-playback]{position:absolute;height:100%;width:100%;display:block;pointer-events:none}",""])},function(e,t){e.exports='<div data-dailymotion id="<%=id%>" style="pointer-events: none; position: absolute; height: 100%; width: 100%; display: block;"></div>'},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=p[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(s(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(s(r.parts[o],t));p[r.id]={id:r.id,refs:1,parts:a}}}}function i(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],s=i[2],u=i[3],l={css:a,media:s,sourceMap:u};n[o]?n[o].parts.push(l):t.push(n[o]={id:o,parts:[l]})}return t}function o(){var e=document.createElement("style"),t=y();return e.type="text/css",t.appendChild(e),e}function a(){var e=document.createElement("link"),t=y();return e.rel="stylesheet",t.appendChild(e),e}function s(e,t){var n,r,i;if(t.singleton){var s=v++;n=h||(h=o()),r=u.bind(null,n,s,!1),i=u.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=a(),r=c.bind(null,n),i=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=o(),r=l.bind(null,n),i=function(){n.parentNode.removeChild(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function u(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function l(e,t){var n=t.css,r=t.media;t.sourceMap;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function c(e,t){var n=t.css,r=(t.media,t.sourceMap);r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var p={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},d=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),y=f(function(){return document.head||document.getElementsByTagName("head")[0]}),h=null,v=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=d());var n=i(e);return r(n,t),function(e){for(var o=[],a=0;a<n.length;a++){var s=n[a],u=p[s.id];u.refs--,o.push(u)}if(e){var l=i(e);r(l,t)}for(var a=0;a<o.length;a++){var u=o[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete p[u.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(3);"string"==typeof r&&(r=[[e.id,r,""]]);n(5)(r,{});r.locals&&(e.exports=r.locals)},function(t,n){t.exports=e}])});